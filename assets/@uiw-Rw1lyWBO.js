import{_ as J,a as R}from"./@babel-0InS3Qhy.js";import{r as u,j as P}from"./react-Cs0UQ-UD.js";import{c as Q,d as X,s as Y,h as Z,f as $,a as ee,l as te,b as ae,e as re,g as ie,i as ne,j as oe,k as se,m as le,E as I,n as ce,o as U,p as fe,q as ue,r as de,t as ge,u as he,v as me,w as pe,x as be,y as ye,z as _,A as m,B as ve,C as Se,D as ke,S as xe,F as Ce,H as Ee}from"./@codemirror-Dom4TZKv.js";import{a as t}from"./@lezer-B1OXniM2.js";var j=function(e){e===void 0&&(e={});var{crosshairCursor:a=!1}=e,n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(Q)),e.defaultKeymap!==!1&&(n=n.concat(X)),e.searchKeymap!==!1&&(n=n.concat(Y)),e.historyKeymap!==!1&&(n=n.concat(Z)),e.foldKeymap!==!1&&(n=n.concat($)),e.completionKeymap!==!1&&(n=n.concat(ee)),e.lintKeymap!==!1&&(n=n.concat(te));var r=[];return e.lineNumbers!==!1&&r.push(ae()),e.highlightActiveLineGutter!==!1&&r.push(re()),e.highlightSpecialChars!==!1&&r.push(ie()),e.history!==!1&&r.push(ne()),e.foldGutter!==!1&&r.push(oe()),e.drawSelection!==!1&&r.push(se()),e.dropCursor!==!1&&r.push(le()),e.allowMultipleSelections!==!1&&r.push(I.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(ce()),e.syntaxHighlighting!==!1&&r.push(U(fe,{fallback:!0})),e.bracketMatching!==!1&&r.push(ue()),e.closeBrackets!==!1&&r.push(de()),e.autocompletion!==!1&&r.push(ge()),e.rectangularSelection!==!1&&r.push(he()),a!==!1&&r.push(me()),e.highlightActiveLine!==!1&&r.push(pe()),e.highlightSelectionMatches!==!1&&r.push(be()),e.tabSize&&typeof e.tabSize=="number"&&r.push(ye.of(" ".repeat(e.tabSize))),r.concat([_.of(n.flat())]).filter(Boolean)},Be=m.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),We=function(e){e===void 0&&(e={});var{indentWithTab:a=!0,editable:n=!0,readOnly:r=!1,theme:c="light",placeholder:f="",basicSetup:g=!0}=e,l=[];switch(a&&l.unshift(_.of([ve])),g&&(typeof g=="boolean"?l.unshift(j()):l.unshift(j(g))),f&&l.unshift(Se(f)),c){case"light":l.push(Be);break;case"dark":l.push(ke);break;case"none":break;default:l.push(c);break}return n===!1&&l.push(m.editable.of(!1)),r&&l.push(I.readOnly.of(!0)),[...l]},He=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(e=>i.state.sliceDoc(e.from,e.to)),selectedText:i.state.selection.ranges.some(e=>!e.empty)}),G=Ce.define(),Le=[];function Ne(i){var{value:e,selection:a,onChange:n,onStatistics:r,onCreateEditor:c,onUpdate:f,extensions:g=Le,autoFocus:l,theme:p="light",height:E=null,minHeight:b=null,maxHeight:B=null,width:W=null,minWidth:H=null,maxWidth:L=null,placeholder:N="",editable:K=!0,readOnly:M=!1,indentWithTab:O=!0,basicSetup:A=!0,root:z,initialState:k}=i,[y,F]=u.useState(),[s,h]=u.useState(),[v,S]=u.useState(),D=m.theme({"&":{height:E,minHeight:b,maxHeight:B,width:W,minWidth:H,maxWidth:L},"& .cm-scroller":{height:"100% !important"}}),w=m.updateListener.of(d=>{if(d.docChanged&&typeof n=="function"&&!d.transactions.some(q=>q.annotation(G))){var C=d.state.doc,T=C.toString();n(T,d)}r&&r(He(d))}),V=We({theme:p,editable:K,readOnly:M,placeholder:N,indentWithTab:O,basicSetup:A}),x=[w,D,...V];return f&&typeof f=="function"&&x.push(m.updateListener.of(f)),x=x.concat(g),u.useEffect(()=>{if(y&&!v){var d={doc:e,selection:a,extensions:x},C=k?I.fromJSON(k.json,d,k.fields):I.create(d);if(S(C),!s){var T=new m({state:C,parent:y,root:z});h(T),c&&c(T,C)}}return()=>{s&&(S(void 0),h(void 0))}},[y,v]),u.useEffect(()=>F(i.container),[i.container]),u.useEffect(()=>()=>{s&&(s.destroy(),h(void 0))},[s]),u.useEffect(()=>{l&&s&&s.focus()},[l,s]),u.useEffect(()=>{s&&s.dispatch({effects:xe.reconfigure.of(x)})},[p,g,E,b,B,W,H,L,N,K,M,O,A,n,f]),u.useEffect(()=>{if(e!==void 0){var d=s?s.state.doc.toString():"";s&&e!==d&&s.dispatch({changes:{from:0,to:d.length,insert:e||""},annotations:[G.of(!0)]})}},[e,s]),{state:v,setState:S,view:s,setView:h,container:y,setContainer:F}}var Ke=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Me=u.forwardRef((i,e)=>{var{className:a,value:n="",selection:r,extensions:c=[],onChange:f,onStatistics:g,onCreateEditor:l,onUpdate:p,autoFocus:E,theme:b="light",height:B,minHeight:W,maxHeight:H,width:L,minWidth:N,maxWidth:K,basicSetup:M,placeholder:O,indentWithTab:A,editable:z,readOnly:k,root:y,initialState:F}=i,s=J(i,Ke),h=u.useRef(null),{state:v,view:S,container:D}=Ne({container:h.current,root:y,value:n,autoFocus:E,theme:b,height:B,minHeight:W,maxHeight:H,width:L,minWidth:N,maxWidth:K,basicSetup:M,placeholder:O,indentWithTab:A,editable:z,readOnly:k,selection:r,onChange:f,onStatistics:g,onCreateEditor:l,onUpdate:p,extensions:c,initialState:F});if(u.useImperativeHandle(e,()=>({editor:h.current,state:v,view:S}),[h,D,v,S]),typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var w=typeof b=="string"?"cm-theme-"+b:"cm-theme";return P.jsx("div",R({ref:h,className:""+w+(a?" "+a:"")},s))});Me.displayName="CodeMirror";var Oe=i=>{var{theme:e,settings:a={},styles:n=[]}=i,r={".cm-gutters":{}},c={};a.background&&(c.backgroundColor=a.background),a.backgroundImage&&(c.backgroundImage=a.backgroundImage),a.foreground&&(c.color=a.foreground),a.fontSize&&(c.fontSize=a.fontSize),(a.background||a.foreground)&&(r["&"]=c),a.fontFamily&&(r["&.cm-editor .cm-scroller"]={fontFamily:a.fontFamily}),a.gutterBackground&&(r[".cm-gutters"].backgroundColor=a.gutterBackground),a.gutterForeground&&(r[".cm-gutters"].color=a.gutterForeground),a.gutterBorder&&(r[".cm-gutters"].borderRightColor=a.gutterBorder),a.caret&&(r[".cm-content"]={caretColor:a.caret},r[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a.caret});var f={};a.gutterActiveForeground&&(f.color=a.gutterActiveForeground),a.lineHighlight&&(r[".cm-activeLine"]={backgroundColor:a.lineHighlight},f.backgroundColor=a.lineHighlight),r[".cm-activeLineGutter"]=f,a.selection&&(r["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:a.selection+" !important"}),a.selectionMatch&&(r["& .cm-selectionMatch"]={backgroundColor:a.selectionMatch});var g=m.theme(r,{dark:e==="dark"}),l=Ee.define(n),p=[g,U(l)];return p},o={background:"#000c18",foreground:"#6688cc",selection:"#770811",selectionMatch:"#770811",cursor:"#ddbb88",dropdownBackground:"#181f2f",activeLine:"#0055ff30",matchingBracket:"#082050",keyword:"#225588",storage:"#225588",variable:"#2277ff",parameter:"#2277ff",function:"#9966b8",string:"#22aa44",constant:"#f280d0",type:"#9966b8",class:"#ddbb88",number:"#f280d0",comment:"#384887",heading:"#6688cc",invalid:"#A22D44",regexp:"#22aa44",tag:"#225588"},Ae={background:o.background,foreground:o.foreground,caret:o.cursor,selection:o.selection,selectionMatch:o.selectionMatch,gutterBackground:o.background,gutterForeground:o.foreground,lineHighlight:o.activeLine},Fe=i=>{var{theme:e="dark",settings:a={},styles:n=[]}=i||{};return Oe({theme:e,settings:R({},Ae,a),styles:[{tag:t.keyword,color:o.keyword},{tag:[t.name,t.deleted,t.character,t.macroName],color:o.variable},{tag:[t.propertyName],color:o.function},{tag:[t.processingInstruction,t.string,t.inserted,t.special(t.string)],color:o.string},{tag:[t.function(t.variableName),t.labelName],color:o.function},{tag:[t.color,t.constant(t.name),t.standard(t.name)],color:o.constant},{tag:[t.definition(t.name),t.separator],color:o.variable},{tag:[t.className],color:o.class},{tag:[t.number,t.changed,t.annotation,t.modifier,t.self,t.namespace],color:o.number},{tag:[t.typeName],color:o.type,fontStyle:o.type},{tag:[t.operator,t.operatorKeyword],color:o.keyword},{tag:[t.url,t.escape,t.regexp,t.link],color:o.regexp},{tag:[t.meta,t.comment],color:o.comment},{tag:t.tagName,color:o.tag},{tag:t.strong,fontWeight:"bold"},{tag:t.emphasis,fontStyle:"italic"},{tag:t.link,textDecoration:"underline"},{tag:t.heading,fontWeight:"bold",color:o.heading},{tag:[t.atom,t.bool,t.special(t.variableName)],color:o.variable},{tag:t.invalid,color:o.invalid},{tag:t.strikethrough,textDecoration:"line-through"},...n]})},we=Fe();export{Me as R,we as a};
